{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///home/ar009/Desktop/DBMS%20Lab/A4/DBMS_OCMS/lib/db.js"],"sourcesContent":["import { neon } from \"@neondatabase/serverless\";\n\nexport const sql = neon(process.env.DATABASE_URL);\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,MAAM,IAAA,gKAAI,EAAC,QAAQ,GAAG,CAAC,YAAY"}},
    {"offset": {"line": 57, "column": 0}, "map": {"version":3,"sources":["file:///home/ar009/Desktop/DBMS%20Lab/A4/DBMS_OCMS/app/api/enroll/route.js"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { sql } from \"@/lib/db\";\n\nexport async function POST(request) {\n  const { courseId, studentId } = await request.json();\n\n  if (!courseId || !studentId) {\n    return NextResponse.json(\n      { error: \"courseId and studentId are required\" },\n      { status: 400 }\n    );\n  }\n\n  try {\n    await sql`\n      INSERT INTO enroll (course_id, student_id, enroll_date, approved)\n      VALUES (${courseId}, ${studentId}, NULL, false)\n    `;\n    return NextResponse.json({ success: true });\n  } catch (error) {\n    const message =\n      error instanceof Error ? error.message : \"Failed to enroll\";\n    return NextResponse.json({ error: message }, { status: 500 });\n  }\n}\n\nexport async function DELETE(request) {\n  try {\n    const { courseId, studentId } = await request.json();\n\n    if (!courseId || !studentId) {\n      return NextResponse.json({ error: \"courseId and studentId are required\" }, { status: 400 });\n    }\n\n    // Only allow cancelling pending (not approved) requests\n    await sql`\n      DELETE FROM enroll\n      WHERE course_id = ${courseId} AND student_id = ${studentId} AND approved = false\n    `;\n\n    return NextResponse.json({ success: true });\n  } catch (error) {\n    const message = error instanceof Error ? error.message : \"Failed to cancel enrollment\";\n    return NextResponse.json({ error: message }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,eAAe,KAAK,OAAO;IAChC,MAAM,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,MAAM,QAAQ,IAAI;IAElD,IAAI,CAAC,YAAY,CAAC,WAAW;QAC3B,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAsC,GAC/C;YAAE,QAAQ;QAAI;IAElB;IAEA,IAAI;QACF,MAAM,kHAAG,CAAC;;cAEA,EAAE,SAAS,EAAE,EAAE,UAAU;IACnC,CAAC;QACD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAK;IAC3C,EAAE,OAAO,OAAO;QACd,MAAM,UACJ,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAC3C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAQ,GAAG;YAAE,QAAQ;QAAI;IAC7D;AACF;AAEO,eAAe,OAAO,OAAO;IAClC,IAAI;QACF,MAAM,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,MAAM,QAAQ,IAAI;QAElD,IAAI,CAAC,YAAY,CAAC,WAAW;YAC3B,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAsC,GAAG;gBAAE,QAAQ;YAAI;QAC3F;QAEA,wDAAwD;QACxD,MAAM,kHAAG,CAAC;;wBAEU,EAAE,SAAS,kBAAkB,EAAE,UAAU;IAC7D,CAAC;QAED,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAK;IAC3C,EAAE,OAAO,OAAO;QACd,MAAM,UAAU,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QACzD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAQ,GAAG;YAAE,QAAQ;QAAI;IAC7D;AACF"}}]
}