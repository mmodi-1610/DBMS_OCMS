{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///home/ar009/Desktop/DBMS%20Lab/A4/DBMS_OCMS/components/dashboards/student-dashboard.jsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const StudentDashboard = registerClientReference(\n    function() { throw new Error(\"Attempted to call StudentDashboard() from the server but StudentDashboard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/dashboards/student-dashboard.jsx <module evaluation>\",\n    \"StudentDashboard\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,mBAAmB,IAAA,wQAAuB,EACnD;IAAa,MAAM,IAAI,MAAM;AAAgP,GAC7Q,6EACA","ignoreList":[0]}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///home/ar009/Desktop/DBMS%20Lab/A4/DBMS_OCMS/components/dashboards/student-dashboard.jsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const StudentDashboard = registerClientReference(\n    function() { throw new Error(\"Attempted to call StudentDashboard() from the server but StudentDashboard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/dashboards/student-dashboard.jsx\",\n    \"StudentDashboard\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,mBAAmB,IAAA,wQAAuB,EACnD;IAAa,MAAM,IAAI,MAAM;AAAgP,GAC7Q,yDACA","ignoreList":[0]}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///home/ar009/Desktop/DBMS%20Lab/A4/DBMS_OCMS/components/dashboards/instructor-dashboard.jsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const InstructorDashboard = registerClientReference(\n    function() { throw new Error(\"Attempted to call InstructorDashboard() from the server but InstructorDashboard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/dashboards/instructor-dashboard.jsx <module evaluation>\",\n    \"InstructorDashboard\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,sBAAsB,IAAA,wQAAuB,EACtD;IAAa,MAAM,IAAI,MAAM;AAAsP,GACnR,gFACA","ignoreList":[0]}},
    {"offset": {"line": 72, "column": 0}, "map": {"version":3,"sources":["file:///home/ar009/Desktop/DBMS%20Lab/A4/DBMS_OCMS/components/dashboards/instructor-dashboard.jsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const InstructorDashboard = registerClientReference(\n    function() { throw new Error(\"Attempted to call InstructorDashboard() from the server but InstructorDashboard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/dashboards/instructor-dashboard.jsx\",\n    \"InstructorDashboard\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,sBAAsB,IAAA,wQAAuB,EACtD;IAAa,MAAM,IAAI,MAAM;AAAsP,GACnR,4DACA","ignoreList":[0]}},
    {"offset": {"line": 86, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///home/ar009/Desktop/DBMS%20Lab/A4/DBMS_OCMS/components/dashboards/admin-dashboard.jsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AdminDashboard = registerClientReference(\n    function() { throw new Error(\"Attempted to call AdminDashboard() from the server but AdminDashboard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/dashboards/admin-dashboard.jsx <module evaluation>\",\n    \"AdminDashboard\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,iBAAiB,IAAA,wQAAuB,EACjD;IAAa,MAAM,IAAI,MAAM;AAA4O,GACzQ,2EACA","ignoreList":[0]}},
    {"offset": {"line": 108, "column": 0}, "map": {"version":3,"sources":["file:///home/ar009/Desktop/DBMS%20Lab/A4/DBMS_OCMS/components/dashboards/admin-dashboard.jsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AdminDashboard = registerClientReference(\n    function() { throw new Error(\"Attempted to call AdminDashboard() from the server but AdminDashboard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/dashboards/admin-dashboard.jsx\",\n    \"AdminDashboard\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,iBAAiB,IAAA,wQAAuB,EACjD;IAAa,MAAM,IAAI,MAAM;AAA4O,GACzQ,uDACA","ignoreList":[0]}},
    {"offset": {"line": 122, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":["file:///home/ar009/Desktop/DBMS%20Lab/A4/DBMS_OCMS/components/dashboards/analyst-dashboard.jsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AnalystDashboard = registerClientReference(\n    function() { throw new Error(\"Attempted to call AnalystDashboard() from the server but AnalystDashboard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/dashboards/analyst-dashboard.jsx <module evaluation>\",\n    \"AnalystDashboard\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,mBAAmB,IAAA,wQAAuB,EACnD;IAAa,MAAM,IAAI,MAAM;AAAgP,GAC7Q,6EACA","ignoreList":[0]}},
    {"offset": {"line": 144, "column": 0}, "map": {"version":3,"sources":["file:///home/ar009/Desktop/DBMS%20Lab/A4/DBMS_OCMS/components/dashboards/analyst-dashboard.jsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AnalystDashboard = registerClientReference(\n    function() { throw new Error(\"Attempted to call AnalystDashboard() from the server but AnalystDashboard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/dashboards/analyst-dashboard.jsx\",\n    \"AnalystDashboard\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,mBAAmB,IAAA,wQAAuB,EACnD;IAAa,MAAM,IAAI,MAAM;AAAgP,GAC7Q,yDACA","ignoreList":[0]}},
    {"offset": {"line": 158, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 166, "column": 0}, "map": {"version":3,"sources":["file:///home/ar009/Desktop/DBMS%20Lab/A4/DBMS_OCMS/app/dashboard/page.jsx"],"sourcesContent":["import { getSession } from \"@/lib/auth\";\nimport { redirect } from \"next/navigation\";\nimport { StudentDashboard } from \"@/components/dashboards/student-dashboard\";\nimport { InstructorDashboard } from \"@/components/dashboards/instructor-dashboard\";\nimport { AdminDashboard } from \"@/components/dashboards/admin-dashboard\";\nimport { AnalystDashboard } from \"@/components/dashboards/analyst-dashboard\";\nimport { sql } from \"@/lib/db\";\n\nasync function getStudentData(userId) {\n  const studentRows = await sql`\n    SELECT s.student_id, s.name, s.skill_level\n    FROM student s WHERE s.user_id = ${userId}\n  `;\n  const student = studentRows[0];\n  if (!student) return { student: null, enrollments: [], courses: [] };\n\n  const enrollments = await sql`\n    SELECT e.enroll_id, e.enroll_date, e.evaluation, e.approved, c.course_id, c.course_name, c.program_type, c.duration\n    FROM enroll e\n    JOIN course c ON e.course_id = c.course_id\n    WHERE e.student_id = ${student.student_id}\n    ORDER BY e.enroll_date DESC\n  `;\n\n  const courses = await sql`SELECT * FROM course ORDER BY course_name`;\n\n  return { student, enrollments, courses };\n}\n\nasync function getInstructorData(userId) {\n  const instructorRows = await sql`\n    SELECT i.instructor_id, i.name, i.contacts\n    FROM instructor i WHERE i.user_id = ${userId}\n  `;\n  const instructor = instructorRows[0];\n  if (!instructor) return { instructor: null, courses: [] };\n\n  const courses = await sql`\n    SELECT c.*\n    FROM course c\n    JOIN instructor_course ic ON c.course_id = ic.course_id\n    WHERE ic.instructor_id = ${instructor.instructor_id}\n    ORDER BY c.course_name\n  `;\n\n  return { instructor, courses };\n}\n\nasync function getAdminData() {\n  const courses = await sql`SELECT * FROM course ORDER BY course_name`;\n  const students = await sql`\n    SELECT s.*, u.username\n    FROM student s\n    LEFT JOIN app_user u ON s.user_id = u.id\n    ORDER BY s.name\n  `;\n  const instructors = await sql`\n    SELECT i.*, u.username\n    FROM instructor i\n    LEFT JOIN app_user u ON i.user_id = u.id\n    ORDER BY i.name\n  `;\n  const instructorCourses = await sql`\n    SELECT ic.*, i.name as instructor_name, c.course_name\n    FROM instructor_course ic\n    JOIN instructor i ON ic.instructor_id = i.instructor_id\n    JOIN course c ON ic.course_id = c.course_id\n  `;\n\n  return { courses, students, instructors, instructorCourses };\n}\n\nasync function getAnalystData() {\n  const enrollmentStats = await sql`\n    SELECT c.course_id, c.course_name, c.program_type,\n      COUNT(e.enroll_id) as enrollment_count,\n      ROUND(AVG(e.evaluation), 1) as avg_evaluation,\n      MIN(e.evaluation) as min_evaluation,\n      MAX(e.evaluation) as max_evaluation\n    FROM course c\n    LEFT JOIN enroll e ON c.course_id = e.course_id\n    GROUP BY c.course_id, c.course_name, c.program_type\n    ORDER BY enrollment_count DESC\n  `;\n\n  const performanceDistribution = await sql`\n    SELECT\n      CASE\n        WHEN evaluation >= 90 THEN 'A (90-100)'\n        WHEN evaluation >= 80 THEN 'B (80-89)'\n        WHEN evaluation >= 70 THEN 'C (70-79)'\n        WHEN evaluation >= 60 THEN 'D (60-69)'\n        WHEN evaluation < 60 THEN 'F (0-59)'\n        ELSE 'Not Graded'\n      END as grade_range,\n      COUNT(*) as count\n    FROM enroll\n    WHERE evaluation IS NOT NULL\n    GROUP BY grade_range\n    ORDER BY grade_range\n  `;\n\n  const totalStudents = await sql`SELECT COUNT(*) as count FROM student`;\n  const totalCourses = await sql`SELECT COUNT(*) as count FROM course`;\n  const totalEnrollments = await sql`SELECT COUNT(*) as count FROM enroll`;\n  const avgEvaluation = await sql`SELECT ROUND(AVG(evaluation), 1) as avg FROM enroll WHERE evaluation IS NOT NULL`;\n\n  return {\n    enrollmentStats,\n    performanceDistribution,\n    summary: {\n      totalStudents: totalStudents[0].count,\n      totalCourses: totalCourses[0].count,\n      totalEnrollments: totalEnrollments[0].count,\n      avgEvaluation: avgEvaluation[0].avg,\n    },\n  };\n}\n\nexport default async function DashboardPage() {\n  const session = await getSession();\n  if (!session) redirect(\"/\");\n\n  switch (session.role) {\n    case \"student\": {\n      const data = await getStudentData(session.id);\n      return <StudentDashboard user={session} data={data} />;\n    }\n    case \"instructor\": {\n      const data = await getInstructorData(session.id);\n      return <InstructorDashboard user={session} data={data} />;\n    }\n    case \"admin\": {\n      const data = await getAdminData();\n      return <AdminDashboard user={session} data={data} />;\n    }\n    case \"analyst\": {\n      const data = await getAnalystData();\n      return <AnalystDashboard user={session} />;\n    }\n    default:\n      redirect(\"/\");\n  }\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AAEA,eAAe,eAAe,MAAM;IAClC,MAAM,cAAc,MAAM,gHAAG,CAAC;;qCAEK,EAAE,OAAO;EAC5C,CAAC;IACD,MAAM,UAAU,WAAW,CAAC,EAAE;IAC9B,IAAI,CAAC,SAAS,OAAO;QAAE,SAAS;QAAM,aAAa,EAAE;QAAE,SAAS,EAAE;IAAC;IAEnE,MAAM,cAAc,MAAM,gHAAG,CAAC;;;;yBAIP,EAAE,QAAQ,UAAU,CAAC;;EAE5C,CAAC;IAED,MAAM,UAAU,MAAM,gHAAG,CAAC,yCAAyC,CAAC;IAEpE,OAAO;QAAE;QAAS;QAAa;IAAQ;AACzC;AAEA,eAAe,kBAAkB,MAAM;IACrC,MAAM,iBAAiB,MAAM,gHAAG,CAAC;;wCAEK,EAAE,OAAO;EAC/C,CAAC;IACD,MAAM,aAAa,cAAc,CAAC,EAAE;IACpC,IAAI,CAAC,YAAY,OAAO;QAAE,YAAY;QAAM,SAAS,EAAE;IAAC;IAExD,MAAM,UAAU,MAAM,gHAAG,CAAC;;;;6BAIC,EAAE,WAAW,aAAa,CAAC;;EAEtD,CAAC;IAED,OAAO;QAAE;QAAY;IAAQ;AAC/B;AAEA,eAAe;IACb,MAAM,UAAU,MAAM,gHAAG,CAAC,yCAAyC,CAAC;IACpE,MAAM,WAAW,MAAM,gHAAG,CAAC;;;;;EAK3B,CAAC;IACD,MAAM,cAAc,MAAM,gHAAG,CAAC;;;;;EAK9B,CAAC;IACD,MAAM,oBAAoB,MAAM,gHAAG,CAAC;;;;;EAKpC,CAAC;IAED,OAAO;QAAE;QAAS;QAAU;QAAa;IAAkB;AAC7D;AAEA,eAAe;IACb,MAAM,kBAAkB,MAAM,gHAAG,CAAC;;;;;;;;;;EAUlC,CAAC;IAED,MAAM,0BAA0B,MAAM,gHAAG,CAAC;;;;;;;;;;;;;;;EAe1C,CAAC;IAED,MAAM,gBAAgB,MAAM,gHAAG,CAAC,qCAAqC,CAAC;IACtE,MAAM,eAAe,MAAM,gHAAG,CAAC,oCAAoC,CAAC;IACpE,MAAM,mBAAmB,MAAM,gHAAG,CAAC,oCAAoC,CAAC;IACxE,MAAM,gBAAgB,MAAM,gHAAG,CAAC,gFAAgF,CAAC;IAEjH,OAAO;QACL;QACA;QACA,SAAS;YACP,eAAe,aAAa,CAAC,EAAE,CAAC,KAAK;YACrC,cAAc,YAAY,CAAC,EAAE,CAAC,KAAK;YACnC,kBAAkB,gBAAgB,CAAC,EAAE,CAAC,KAAK;YAC3C,eAAe,aAAa,CAAC,EAAE,CAAC,GAAG;QACrC;IACF;AACF;AAEe,eAAe;IAC5B,MAAM,UAAU,MAAM,IAAA,yHAAU;IAChC,IAAI,CAAC,SAAS,IAAA,iMAAQ,EAAC;IAEvB,OAAQ,QAAQ,IAAI;QAClB,KAAK;YAAW;gBACd,MAAM,OAAO,MAAM,eAAe,QAAQ,EAAE;gBAC5C,qBAAO,8OAAC,qKAAgB;oBAAC,MAAM;oBAAS,MAAM;;;;;;YAChD;QACA,KAAK;YAAc;gBACjB,MAAM,OAAO,MAAM,kBAAkB,QAAQ,EAAE;gBAC/C,qBAAO,8OAAC,2KAAmB;oBAAC,MAAM;oBAAS,MAAM;;;;;;YACnD;QACA,KAAK;YAAS;gBACZ,MAAM,OAAO,MAAM;gBACnB,qBAAO,8OAAC,iKAAc;oBAAC,MAAM;oBAAS,MAAM;;;;;;YAC9C;QACA,KAAK;YAAW;gBACd,MAAM,OAAO,MAAM;gBACnB,qBAAO,8OAAC,qKAAgB;oBAAC,MAAM;;;;;;YACjC;QACA;YACE,IAAA,iMAAQ,EAAC;IACb;AACF"}}]
}